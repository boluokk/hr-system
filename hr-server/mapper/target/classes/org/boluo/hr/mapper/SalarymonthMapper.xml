<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.boluo.hr.mapper.SalaryMonthMapper">
    <sql id="column">id, salary_id, employee_id, time, remark</sql>
    <resultMap id="BaseResultMap" type="org.boluo.hr.pojo.SalaryMonth">
        <id column="id" property="id" jdbcType="INTEGER" />
        <result column="salary_id" property="salaryId" jdbcType="VARCHAR"/>
        <result column="employee_id" property="employeeId" jdbcType="INTEGER"/>
        <result column="time" property="time" jdbcType="VARCHAR"/>
        <result column="salary_name" property="salaryName" jdbcType="VARCHAR"/>
        <result column="remark" property="remark" jdbcType="VARCHAR"/>
        <association property="employee" column="employee_id"
                     select="org.boluo.hr.mapper.EmployeeMapper.selectByPrimaryKey" />
    </resultMap>

    <select id="selectAll" resultMap="BaseResultMap">
        select sm.id, sm.salary_id, sm.employee_id, sm.time, sm.remark, s.name as salary_name
        from salary_month as sm
        join salary as s
        where s.id = sm.salary_id
    </select>

    <select id="selectByEmployeeWorkId" resultMap="BaseResultMap">
        select s.id, s.employee_id, s.salary_id, s.time, s.remark
        from employee as e
        join salary_month as s on s.employee_id = e.id
        where e.work_id = #{employeeWorkId}
    </select>
</mapper>